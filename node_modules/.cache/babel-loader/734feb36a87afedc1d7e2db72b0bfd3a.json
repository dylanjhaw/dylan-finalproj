{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dylan\\\\web102_unit7lab\\\\client\\\\src\\\\pages\\\\ReadPosts.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Card from '../components/Card';\nimport { supabase } from '../client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ReadPosts = props => {\n  _s();\n\n  const [posts, setPosts] = useState([]);\n  const [sortOption, setSortOption] = useState(localStorage.getItem('sortOption') || 'created_at');\n  const [searchTerm, setSearchTerm] = useState('');\n  useEffect(() => {\n    fetchPosts();\n  }, [sortOption, searchTerm]);\n\n  const fetchPosts = async () => {\n    let {\n      data\n    } = await supabase.from('Posts').select('id, title, author, description, created_at, upvote').order(sortOption, {\n      ascending: sortOption === 'created_at'\n    });\n\n    if (searchTerm) {\n      data = data.filter(post => post.title.toLowerCase().includes(searchTerm.toLowerCase()));\n    }\n\n    setPosts(data);\n  };\n\n  const handleSortOptionChange = e => {\n    setSortOption(e.target.value);\n    localStorage.setItem('sortOption', e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: searchTerm,\n      onChange: e => setSearchTerm(e.target.value),\n      placeholder: \"Search posts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"select\", {\n      value: sortOption,\n      onChange: handleSortOptionChange,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"created_at\",\n        children: \"Sort by created time\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"upvote\",\n        children: \"Sort by upvote count\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }, this), posts.map((post, index) => /*#__PURE__*/_jsxDEV(Card, { ...post\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 17\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ReadPosts, \"eeLJdTIK/DkJ0XM6LUjaJDU33rM=\");\n\n_c = ReadPosts;\nexport default ReadPosts;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReadPosts\");","map":{"version":3,"names":["React","useState","useEffect","Card","supabase","ReadPosts","props","posts","setPosts","sortOption","setSortOption","localStorage","getItem","searchTerm","setSearchTerm","fetchPosts","data","from","select","order","ascending","filter","post","title","toLowerCase","includes","handleSortOptionChange","e","target","value","setItem","map","index"],"sources":["C:/Users/dylan/web102_unit7lab/client/src/pages/ReadPosts.js"],"sourcesContent":["\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport Card from '../components/Card';\r\nimport { supabase } from '../client'\r\n\r\nconst ReadPosts = (props) => {\r\n    const [posts, setPosts] = useState([]);\r\n    const [sortOption, setSortOption] = useState(localStorage.getItem('sortOption') || 'created_at');\r\n    const [searchTerm, setSearchTerm] = useState(''); \r\n\r\n    useEffect(() => {\r\n        fetchPosts();\r\n    }, [sortOption, searchTerm]); \r\n\r\n    const fetchPosts = async () => {\r\n        let { data } = await supabase\r\n            .from('Posts')\r\n            .select('id, title, author, description, created_at, upvote')\r\n            .order(sortOption, { ascending: sortOption === 'created_at' });\r\n\r\n        if (searchTerm) {\r\n            data = data.filter(post => post.title.toLowerCase().includes(searchTerm.toLowerCase())); \r\n        }\r\n        \r\n        setPosts(data);\r\n    }\r\n\r\n    const handleSortOptionChange = (e) => {\r\n        setSortOption(e.target.value);\r\n        localStorage.setItem('sortOption', e.target.value);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <input type=\"text\" value={searchTerm} onChange={e => setSearchTerm(e.target.value)} placeholder=\"Search posts\" /> {/* new input field for the search term */}\r\n            <select value={sortOption} onChange={handleSortOptionChange}>\r\n                <option value=\"created_at\">Sort by created time</option>\r\n                <option value=\"upvote\">Sort by upvote count</option>\r\n            </select>\r\n            {posts.map((post, index) => (\r\n                <Card key={index} {...post} />\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ReadPosts;"],"mappings":";;;AAEA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,SAASC,QAAT,QAAyB,WAAzB;;;AAEA,MAAMC,SAAS,GAAIC,KAAD,IAAW;EAAA;;EACzB,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,EAAD,CAAlC;EACA,MAAM,CAACQ,UAAD,EAAaC,aAAb,IAA8BT,QAAQ,CAACU,YAAY,CAACC,OAAb,CAAqB,YAArB,KAAsC,YAAvC,CAA5C;EACA,MAAM,CAACC,UAAD,EAAaC,aAAb,IAA8Bb,QAAQ,CAAC,EAAD,CAA5C;EAEAC,SAAS,CAAC,MAAM;IACZa,UAAU;EACb,CAFQ,EAEN,CAACN,UAAD,EAAaI,UAAb,CAFM,CAAT;;EAIA,MAAME,UAAU,GAAG,YAAY;IAC3B,IAAI;MAAEC;IAAF,IAAW,MAAMZ,QAAQ,CACxBa,IADgB,CACX,OADW,EAEhBC,MAFgB,CAET,oDAFS,EAGhBC,KAHgB,CAGVV,UAHU,EAGE;MAAEW,SAAS,EAAEX,UAAU,KAAK;IAA5B,CAHF,CAArB;;IAKA,IAAII,UAAJ,EAAgB;MACZG,IAAI,GAAGA,IAAI,CAACK,MAAL,CAAYC,IAAI,IAAIA,IAAI,CAACC,KAAL,CAAWC,WAAX,GAAyBC,QAAzB,CAAkCZ,UAAU,CAACW,WAAX,EAAlC,CAApB,CAAP;IACH;;IAEDhB,QAAQ,CAACQ,IAAD,CAAR;EACH,CAXD;;EAaA,MAAMU,sBAAsB,GAAIC,CAAD,IAAO;IAClCjB,aAAa,CAACiB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAb;IACAlB,YAAY,CAACmB,OAAb,CAAqB,YAArB,EAAmCH,CAAC,CAACC,MAAF,CAASC,KAA5C;EACH,CAHD;;EAKA,oBACI;IAAA,wBACI;MAAO,IAAI,EAAC,MAAZ;MAAmB,KAAK,EAAEhB,UAA1B;MAAsC,QAAQ,EAAEc,CAAC,IAAIb,aAAa,CAACa,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlE;MAAoF,WAAW,EAAC;IAAhG;MAAA;MAAA;MAAA;IAAA,QADJ,oBAEI;MAAQ,KAAK,EAAEpB,UAAf;MAA2B,QAAQ,EAAEiB,sBAArC;MAAA,wBACI;QAAQ,KAAK,EAAC,YAAd;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADJ,eAEI;QAAQ,KAAK,EAAC,QAAd;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAFJ;IAAA;MAAA;MAAA;MAAA;IAAA,QAFJ,EAMKnB,KAAK,CAACwB,GAAN,CAAU,CAACT,IAAD,EAAOU,KAAP,kBACP,QAAC,IAAD,OAAsBV;IAAtB,GAAWU,KAAX;MAAA;MAAA;MAAA;IAAA,QADH,CANL;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAYH,CAvCD;;GAAM3B,S;;KAAAA,S;AAyCN,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}